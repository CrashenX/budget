Dev Notes
---------

su postgres -c psql postgres postgres
  ALTER USER jesse SUPERUSER;   # Grant permission to CREATE FUNCTION
  ALTER USER jesse NOSUPERUSER;
  DROP DATABASE budget; CREATE DATABASE budget; GRANT ALL PRIVILEGES ON DATABASE budget to jesse;

psql budget jesse
  DROP FUNCTION set_budget() CASCADE; # Drop if already exists and you need to update
  CREATE FUNCTION set_budget() RETURNS trigger AS '/tmp/budget_triggers.so' LANGUAGE C; 

irb
  load './budgetdb.rb'; db = BudgetDB.connect(""); records = BudgetDB::Records.new; records.load("data/records.txt"); records.load("data/budgets.txt")
  load './budgetdb.rb'; db = BudgetDB.connect(""); c = BudgetDB::Classify.new; rules = c.load; c.apply(rules)
  records.save

vim triggers.c
  :! gcc -I/usr/include/postgresql/8.4/server -fpic -shared % -o budget_triggers.so


2013-09-14 Steps to Use:

  psql budget jesse < drop.sql
  psql budget jesse < budget.sql
  irb
  load './budgetdb.rb'; db = BudgetDB.connect(""); records = BudgetDB::Records.new; records.load("data/records.txt"); records.load("data/budgets.txt")
  records.save
  quit
  ruby rules.rb # hardlink to data/rules.rb
  select date,amount,budget_id,type,description,display from transactions where account_id = 5 and display is null order by date;
